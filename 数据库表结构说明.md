# 阿里巴巴供应商数据库表结构说明

数据库文件：`alibaba_supplier_data.db`

## 1. suppliers（供应商表）
主要存储供应商的基本信息和状态

| 字段名 | 数据类型 | 默认值 | 说明 |
|--------|----------|--------|------|
| id | INTEGER PRIMARY KEY AUTOINCREMENT | - | 主键，自增ID |
| company_id | TEXT | - | 公司ID |
| company_name | TEXT | - | 公司名称 |
| action_url | TEXT | - | 公司详情页URL |
| country_code | TEXT | - | 国家代码 |
| city | TEXT | - | 城市 |
| gold_years | TEXT | - | 金牌供应商年数 |
| verified_supplier | BOOLEAN | - | 是否认证供应商 |
| is_factory | BOOLEAN | - | 是否工厂 |
| review_score | TEXT | - | 评分 |
| review_count | INTEGER | - | 评价数量 |
| company_on_time_shipping | TEXT | - | 按时发货率 |
| factory_size_text | TEXT | - | 工厂规模文本 |
| total_employees_text | TEXT | - | 员工总数文本 |
| transaction_count_6months | TEXT | - | 6个月交易次数 |
| transaction_gmv_6months_text | TEXT | - | 6个月交易额文本 |
| gold_supplier | BOOLEAN | - | 是否金牌供应商 |
| trade_assurance | BOOLEAN | - | 是否贸易保障 |
| response_time | TEXT | - | 响应时间 |
| category_id | TEXT | - | 分类ID |
| category_name | TEXT | - | 分类名称 |
| save_path | TEXT | - | 保存路径 |
| license_extracted | BOOLEAN | FALSE | 执照是否已提取 |
| is_used | BOOLEAN | FALSE | 是否已使用 |
| extraction_failed_count | INTEGER | 0 | 提取失败次数 |
| skip_extraction | BOOLEAN | FALSE | 是否跳过提取 |
| last_extraction_attempt | TIMESTAMP | - | 最后提取尝试时间 |
| created_at | TIMESTAMP | CURRENT_TIMESTAMP | 创建时间 |

## 2. licenses（执照图片表）
存储供应商的执照图片信息

| 字段名 | 数据类型 | 默认值 | 说明 |
|--------|----------|--------|------|
| id | INTEGER PRIMARY KEY AUTOINCREMENT | - | 主键，自增ID |
| supplier_id | INTEGER | - | 供应商ID（外键） |
| license_name | TEXT | - | 执照名称 |
| license_url | TEXT | - | 执照图片URL |
| file_id | TEXT | - | 文件ID |
| created_at | TIMESTAMP | CURRENT_TIMESTAMP | 创建时间 |

**外键关系：** `supplier_id` → `suppliers(id)`

## 3. license_info（执照信息表）
存储从执照中提取的结构化信息

| 字段名 | 数据类型 | 默认值 | 说明 |
|--------|----------|--------|------|
| id | INTEGER PRIMARY KEY AUTOINCREMENT | - | 主键，自增ID |
| supplier_id | INTEGER | - | 供应商ID（外键） |
| registration_no | TEXT | - | 注册号 |
| company_name | TEXT | - | 公司名称 |
| date_of_issue | TEXT | - | 发证日期 |
| date_of_expiry | TEXT | - | 有效期至 |
| registered_capital | TEXT | - | 注册资本 |
| country_territory | TEXT | - | 国家/地区 |
| registered_address | TEXT | - | 注册地址 |
| year_established | TEXT | - | 成立年份 |
| legal_form | TEXT | - | 法律形式 |
| legal_representative | TEXT | - | 法定代表人 |
| created_at | TIMESTAMP | CURRENT_TIMESTAMP | 创建时间 |

**外键关系：** `supplier_id` → `suppliers(id)`

## 4. proxies（代理配置表）
存储代理服务器配置信息

| 字段名 | 数据类型 | 默认值 | 说明 |
|--------|----------|--------|------|
| id | INTEGER PRIMARY KEY AUTOINCREMENT | - | 主键，自增ID |
| name | TEXT NOT NULL | - | 代理名称 |
| host | TEXT NOT NULL | - | 代理主机地址 |
| port | INTEGER NOT NULL | - | 代理端口 |
| username | TEXT | - | 用户名 |
| password | TEXT | - | 密码 |
| is_active | BOOLEAN | FALSE | 是否激活 |
| created_at | TIMESTAMP | CURRENT_TIMESTAMP | 创建时间 |

## 数据库关系图
```
suppliers (1) ←→ (N) licenses
suppliers (1) ←→ (N) license_info
proxies (独立表，无外键关系)
```

## 重要说明
- 数据库使用SQLite格式
- 所有时间戳字段使用TIMESTAMP类型
- 布尔字段使用BOOLEAN类型（在SQLite中实际存储为INTEGER 0/1）
- 外键约束已定义但需要SQLite启用外键支持才生效
- 数据库文件路径可通过GUI界面自定义设置

## 使用说明
1. 通过GUI界面可以自定义数据库文件路径
2. 系统会自动创建所有必要的表结构
3. 代理配置会在初始化时插入默认值
4. suppliers表的is_used字段会在数据库升级时自动添加